<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crab Productions‚Ñ¢Ô∏è - We're stupidly relatable</title>
    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #000033; 
            color: #E0E0FF; 
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Top Navigation Bar */
        .top-nav {
            background-color: #000044; 
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .top-nav .logo {
            font-size: 1.8em;
            font-weight: bold;
            color: #FFFFFF; /* Logo Color: White */
            text-decoration: none;
            margin-right: 30px; 
        }

        .top-nav .nav-links {
            display: flex;
        }

        .top-nav .nav-links a {
            color: #FFFFFF; 
            text-decoration: none;
            padding: 8px 15px;
            margin: 0 5px;
            font-weight: bold;
            transition: color 0.3s;
            cursor: pointer;
        }

        .top-nav .nav-links a:hover {
            color: #FFD700; 
        }

        /* Main Content and View Container */
        .content-container {
            flex-grow: 1; 
            background-color: #001155; 
            padding: 50px 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        /* Hero Styling (Default View) */
        .hero-view {
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
        }

        .hero h1 {
            margin: 0 0 10px 0;
            font-size: 4em; 
            color: #FFD700; 
            text-shadow: 3px 3px #000000;
        }

        .hero p {
            margin: 0;
            font-size: 1.8em; 
            font-style: italic;
            color: #AAAAFF; 
            max-width: 800px; 
            line-height: 1.4;
        }
        
        /* Feature View Styling (Products, Account, Subscribe) */
        .feature-view {
            max-width: 800px; /* Increased max-width for benefit list */
            width: 100%;
            padding: 20px;
            background-color: #002266;
            border-radius: 8px;
            text-align: left;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        
        .feature-view h2 {
            color: #FFD700;
            border-bottom: 2px solid #000044;
            padding-bottom: 10px;
            margin-top: 0;
            text-align: center; /* Center feature view titles */
        }
        
        /* Product Specific Styles */
        #products-view h3 { /* Header for the entire section */
            color: #FF69B4; /* Pink header for the section */
            font-size: 2em;
            margin-bottom: 30px;
        }

        .product-item {
            background-color: #003377;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .product-item h4 {
            color: #AAAAFF;
            margin-top: 0;
            font-size: 1.5em;
        }

        .product-item strong {
            color: #FFD700;
            font-size: 1.3em;
            display: block;
            margin-top: 10px;
        }
        
        /* Subscribe Specific Styles */
        .benefits-list {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }

        .benefits-list li {
            background-color: #003377;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 4px;
            display: flex;
            align-items: center;
        }

        .benefits-list li::before {
            content: 'ü¶Ä'; /* Crab emoji bullet point */
            margin-right: 10px;
            font-size: 1.2em;
            color: #FFD700;
        }

        .subscribe-box {
            text-align: center;
            margin-top: 30px;
        }
        
        /* Form/Input and Button Styling */
        .feature-view label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
        }
        
        .feature-view input[type="text"], 
        .feature-view input[type="password"] {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #000044;
            background-color: #000033;
            color: #E0E0FF;
            box-sizing: border-box;
            border-radius: 4px;
        }
        
        .feature-view button {
            background-color: #FF69B4; 
            color: white;
            padding: 10px 20px;
            margin-top: 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .feature-view button:hover {
            background-color: #FF0099;
        }
        
        #status-message {
            margin-top: 20px;
            padding: 10px;
            border-radius: 4px;
            color: white;
            font-weight: bold;
        }

        .infinite-trial-note {
            margin-top: 5px;
            font-style: italic;
            color: #9999CC;
            font-size: 0.9em;
        }

        /* Footer Styles */
        footer {
            background-color: #000022; 
            padding: 15px 10px; 
            text-align: center;
            font-size: 0.9em;
            color: #9999CC;
            border-top: 1px solid #001155;
        }

        footer a {
            color: #FF69B4; 
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s;
        }

        footer a:hover {
            color: #FFFFFF;
        }

        /* --- TERMS OF SERVICE MODAL STYLES --- */
        #terms-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 50, 0.95); /* Dark blue overlay */
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
            z-index: 1000; 
        }

        #terms-content {
            background-color: #002266;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
            border: 3px solid #FFD700;
        }

        #terms-content h2 {
            color: #FF69B4;
            margin-top: 0;
        }

        #terms-list {
            list-style: none;
            padding: 0;
            text-align: left;
            margin-bottom: 20px;
        }

        #terms-list li {
            background-color: #003377;
            padding: 8px;
            margin-bottom: 5px;
            border-left: 5px solid #FFD700;
        }

        #terms-footer {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px dashed #001155;
        }

        #real-company-warning {
            color: #9999CC;
            font-size: 0.8em;
            margin-top: 10px;
        }
        
        /* --- MOBILE RESPONSIVE STYLES --- */
        @media (max-width: 600px) {
            .top-nav {
                flex-direction: column; 
                align-items: flex-start; 
                padding: 10px;
            }
            .top-nav .logo {
                margin-bottom: 10px; 
                margin-right: 0;
                font-size: 1.5em;
            }
            .top-nav .nav-links {
                flex-direction: column; 
                width: 100%; 
            }
            .top-nav .nav-links a {
                padding: 10px 0;
                margin: 0;
                text-align: left; 
                border-bottom: 1px solid rgba(255, 255, 255, 0.1); 
            }
            .top-nav .nav-links a:last-child {
                border-bottom: none;
            }
            .hero h1 {
                font-size: 2.5em; 
            }
            .hero p {
                font-size: 1.2em; 
            }
            footer {
                font-size: 0.8em;
            }
            #products-view h3 {
                font-size: 1.5em;
            }
            #terms-content {
                margin: 20px;
                padding: 20px;
            }
        }
    </style>
</head>
<body>

    <div id="terms-modal">
        <div id="terms-content">
            <h2>ü¶Ä Crab Productions‚Ñ¢Ô∏è Terms of Service</h2>
            <ul id="terms-list">
                <li>
<strong> Crab productions is not responsible for the following: </strong>

</li>
                <li>Stolen items</li>
                <li>Missing souls</li>
                <li>Fatal injuries</li>
                <li>Death</li>
                <li>Aftermath of The Die of Death and Time products</li>
                <li>And pests spontaneously appearing in your house after the purchase of any of our ‚ÄúExotic‚Äù Products.</li>
            </ul>

            <p style="font-weight: bold; color: #AAAAFF;">If any issues arise please do not sue or contact us.</p>
            
            <div id="terms-footer">
                <button onclick="acceptTerms()">Click below to accept all terms and cookies</button>
                <p id="real-company-warning">Crab productions is NOT A REAL COMPANY (Yet)</p>
            </div>
        </div>
    </div>
    <div class="top-nav">
        <a href="#" class="logo" onclick="showView('hero-view')">Crab Productions‚Ñ¢Ô∏è</a>
        <div class="nav-links">
            <a onclick="showView('hero-view')">Home</a>
            <a onclick="showView('products-view')">Products</a>
            <a onclick="showView('subscribe-view')">Subscribe</a>
            <a onclick="showView('account-view')">Account</a>
        </div>
    </div>

    <div class="content-container">
        
        <div id="hero-view" class="hero-view">
            <div class="hero">
                <h1>Crab Productions‚Ñ¢Ô∏è</h1>
                <p>We‚Äôre stupidly relatable</p>
            </div>
        </div>

        <div id="products-view" class="feature-view" style="display:none;">
            <h3>ü¶Ä Our "Exotic" Products</h3>
            
            <div class="product-item">
                <h4>The Human Cloning Machine </h4>
                <p> Ever wished you could be in 2 places at once? Now you can! With Crab Productions‚Ñ¢Ô∏è‚Äôs latest invention the Human cloning machine,simply step in choose a color for your clone to wear and click the big red button and your clone will pop out the back,in case of emergency splash clone with water to destroy or wait the 2 hours for it to dustify,if you‚Äôd like to extend this timer then you‚Äôll have to Subscribe to Crab Productions‚Ñ¢Ô∏è+ (500$ a month) you can get this handy machine for only 5000$! Each clone costs 3999.99$!(sold seperatly)  </p>
                
                <p><strong>Price:5000$</strong>  </p>
                <button onclick="alert('Thanks for your muns,Machine will arrive when its released in 3041')">Purchase Now</button>
            </div>



             <div class="product-item">
                <h4>The Die of Death </h4>
                <p> Is your enemy making you angry? shut them up with this! The Die Of Death! This fancy Die when rolled will decide a number for your enemies fate. Requires The die of time(sold separately), Get this for the low price of YOUR SOUL,it probably isnt worth that much anyway! so really were helping you!</p>
                
                <p><strong>Price:Your SOUL</strong>  </p>
                <button onclick="alert('Thanks for your Soul,Die will arrive when I remeber to ship it!')">Purchase Now</button>
            </div>



             <div class="product-item">
                <h4>The Die of Time </h4>
                <p> You may think that This die lets you control time,But you're wrong!!This is a completely normal 10 sided die,its just required for the die of death! if it rolls under 4,your enemy dies within seconds depending on the number you rolled on the die of death! if it rolled over 4 then they die in hours! a 9 means they die in years and 0 is they dont die!!! For the low price of 3.99$!  </p>
                
                <p><strong>Price:3.99$</strong>  </p>
                <button onclick="alert('Thanks for your purchase,The die of time will replace the nearest 10-sided die closest to you!')">Purchase Now</button>
            </div>


             <div class="product-item">
                <h4>Totally legit system scan! </h4>
                <p> Wondering what is hiding in the depths of your files? just use Crab productions FREE System scan to SEE just that! (Totally not a Virus)  </p>
                
                <p><strong>Price:Free!!!</strong>  </p>
                <button> <a href="https://thecrabspilot.github.io/TOTALLYNOTAVIRUS/"
   style="
          color: white; 
          text-decoration: none; 
          ">
  Use now!
</a>


</button>

            </div>


        </div>







        <div id="subscribe-view" class="feature-view" style="display:none;">
            <h2>üéâ Upgrade to Crab Productions‚Ñ¢Ô∏è+</h2>
            <p style="text-align: center; color: #AAAAFF;">Normally 500$</p>
            
            <ul class="benefits-list">
                <li>Extra clone lifespan!!!</li>
                <li>Thats it</li>
                <li>seriously</li>
                <li>What?</li>
                <li>if i give you my adress can you doordash me some tacos?</li>
            </ul>

            <div class="subscribe-box">
                <button onclick="subscribe()">Start Your Free Trial!</button>
                <p class="infinite-trial-note">(It's infinite because I‚Äôll forget to manually end it lol)</p>
            </div>
        </div>

        <div id="account-view" class="feature-view" style="display:none;">
            <h2>üë§ Manage Your Crab Account</h2>
            <div id="account-info">
                <p>Loading account status...</p>
            </div>
            
            <form id="create-account-form" style="display:none;">
                <h3>Create New Account</h3>
                <label for="username">Username:</label>
                <input type="text" id="username" required>
                
                <label for="password">Password (Optional but recommended):</label>
                <input type="password" id="password">
                
                <button type="button" onclick="createAccount()">Save Account</button>
            </form>

            <div id="promo-code-section" style="margin-top: 30px;">
                <h3>üí∞ Apply Promo Code</h3>
                <p id="discount-status">Discount Status: None</p>
                <label for="promo-code-input">Enter Code:</label>
                <input type="text" id="promo-code-input" placeholder="Code here">
                <button type="button" onclick="applyPromoCode()">Apply Code</button>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button type="button" onclick="showTermsModal()">Read Terms of Service Again</button>
            </div>
        </div>
        
        <div id="subscription-status" style="display:none;"></div>
        <div id="status-message"></div>

    </div>

    <footer>
        <p>
            ¬©2025 Crab Productions‚Ñ¢Ô∏è | All Rights Reserved. Except for the rights we forgot about. And the ones we lost in a game of Go Fish. We're not lawyers, don't sue us.
        </p>
        <p>
            Check out our source of all that stupidly relatable content: 
            <a href="https://www.youtube.com/@THECRABSPILOT" target="_blank">YouTube: @THECRABSPILOT</a>
        </p>
    </footer>

    <script>
        // --- Discount Variables ---
        const VALID_PROMO_CODE = 'ImACoolTeacher';
        const DISCOUNT_RATE = 0.75; // 75% off

        document.addEventListener('DOMContentLoaded', (event) => {
            // --- INITIAL LOAD CHECK ---
            const accepted = localStorage.getItem('crab_terms_accepted') === 'true';
            if (!accepted) {
                showTermsModal();
            } else {
                // If accepted, load the rest of the app normally
                updateAccountInfo();
                updateSubscriptionStatus();
                updateProductPrices(); 
                showView('hero-view'); 
            }
        });

        // --- NEW: Terms of Service Modal Logic ---
        function showTermsModal() {
            document.getElementById('terms-modal').style.display = 'flex';
        }

        function acceptTerms() {
            localStorage.setItem('crab_terms_accepted', 'true');
            document.getElementById('terms-modal').style.display = 'none';
            
            // If the app hasn't fully loaded yet (first time acceptance), initialize here
            if (localStorage.getItem('crab_username') === null) {
                updateAccountInfo();
                updateSubscriptionStatus();
                updateProductPrices(); 
                showView('hero-view'); 
            }
        }

        // --- Price Calculation Helper ---
        function formatPrice(price) {
            // Handle "Your SOUL" and "Free!!!" prices
            if (typeof price === 'string') return price;
            return `$${price.toFixed(2)}`;
        }

        function calculateDiscountedPrice(originalPrice) {
            const discountActive = localStorage.getItem('crab_discount') === 'active';
            if (!discountActive) {
                return originalPrice;
            }

            // Only apply discount to number prices
            if (typeof originalPrice === 'number') {
                return originalPrice * (1 - DISCOUNT_RATE);
            }
            return originalPrice;
        }

        // --- Update Product Prices (Called on load and discount change) ---
        function updateProductPrices() {
            const discountActive = localStorage.getItem('crab_discount') === 'active';
            const productsContainer = document.getElementById('products-view');
            
            // Product 1: The Human Cloning Machine (5000$)
            const machineItem = productsContainer.querySelector('.product-item:nth-child(2)');
            if (machineItem) {
                const originalPrice = 5000;
                const discountedPrice = calculateDiscountedPrice(originalPrice);
                const priceStrong = machineItem.querySelector('strong');
                
                if (discountActive && typeof originalPrice === 'number') {
                    priceStrong.innerHTML = `Price: <span style="text-decoration: line-through; color: #9999CC;">${formatPrice(originalPrice)}</span> ${formatPrice(discountedPrice)}`;
                } else {
                    priceStrong.textContent = `Price:${formatPrice(originalPrice)}`;
                }
            }
            
            // Product 3: The Die of Time (3.99$)
            const timeDieItem = productsContainer.querySelector('.product-item:nth-child(4)');
            if (timeDieItem) {
                const originalPrice = 3.99;
                const discountedPrice = calculateDiscountedPrice(originalPrice);
                const priceStrong = timeDieItem.querySelector('strong');
                
                if (discountActive && typeof originalPrice === 'number') {
                    priceStrong.innerHTML = `Price: <span style="text-decoration: line-through; color: #9999CC;">${formatPrice(originalPrice)}</span> ${formatPrice(discountedPrice)}`;
                } else {
                    priceStrong.textContent = `Price:${formatPrice(originalPrice)}`;
                }
            }
        }


        // --- View Management ---
        function showView(viewId) {
            // Check if terms are accepted before showing any view
            if (localStorage.getItem('crab_terms_accepted') !== 'true' && viewId !== 'hero-view') {
                showTermsModal();
                return; 
            }

            // Hide all feature views
            const views = ['hero-view', 'products-view', 'account-view', 'subscribe-view'];
            views.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.style.display = 'none';
                }
            });

            // Show the requested view
            const targetElement = document.getElementById(viewId);
            if (targetElement) {
                // Use flex for centering in hero/feature views
                targetElement.style.display = ['hero-view'].includes(viewId) ? 'flex' : 'block'; 
                // Special update for the Account view
                if (viewId === 'account-view') {
                    updateAccountInfo();
                }
                // Special update for Products view to ensure prices are current
                if (viewId === 'products-view') {
                     updateProductPrices();
                }
            }
            // Clear status message when changing views
            document.getElementById('status-message').textContent = '';
            document.getElementById('status-message').style.backgroundColor = 'transparent';
        }

        // --- Account Management (Local Storage) ---
        function updateAccountInfo() {
            const username = localStorage.getItem('crab_username');
            const discountActive = localStorage.getItem('crab_discount') === 'active';
            const accountInfoDiv = document.getElementById('account-info');
            const createForm = document.getElementById('create-account-form');
            const subscriptionText = document.getElementById('subscription-status').textContent;
            const discountStatusDiv = document.getElementById('discount-status'); 

            // Update Discount Status Display
            if (discountStatusDiv) {
                if (discountActive) {
                    discountStatusDiv.textContent = `Discount Status: Active (75% off with "${VALID_PROMO_CODE}") üéâ`;
                    discountStatusDiv.style.color = '#FFD700';
                } else {
                    discountStatusDiv.textContent = 'Discount Status: None';
                    discountStatusDiv.style.color = '#E0E0FF';
                }
            }


            if (username) {
                accountInfoDiv.innerHTML = `
                    <p>Welcome back, <strong>${username}</strong>! You are currently logged in.</p>
                    <p>Subscription Status: ${subscriptionText || 'No active subscription.'}</p>
                    <button onclick="deleteAccount()">Log Out/Delete Account</button>
                `;
                createForm.style.display = 'none';
            } else {
                accountInfoDiv.innerHTML = `
                    <p>No account found. Please create one to manage your stuff.</p>
                `;
                createForm.style.display = 'block';
            }
        }

        // --- Promo Code Logic ---
        function applyPromoCode() {
            const input = document.getElementById('promo-code-input').value.trim();
            const statusMessage = document.getElementById('status-message');
            
            if (input.toUpperCase() === VALID_PROMO_CODE.toUpperCase()) {
                // Success: Activate the discount
                localStorage.setItem('crab_discount', 'active');
                statusMessage.style.backgroundColor = 'green';
                statusMessage.textContent = `Code accepted! You now have a massive ${DISCOUNT_RATE * 100}% discount on all paid products!`;
                
                // Clear input
                document.getElementById('promo-code-input').value = '';
                
                // Update UI
                updateAccountInfo();
                updateProductPrices();

            } else if (input === '') {
                statusMessage.style.backgroundColor = 'orange';
                statusMessage.textContent = 'Please enter a promo code first.';
            }
            else {
                // Failure
                statusMessage.style.backgroundColor = 'red';
                statusMessage.textContent = 'Invalid code. That teacher must not be cool enough.';
            }
        }


        function createAccount() {
            const usernameInput = document.getElementById('username').value.trim();
            const statusMessage = document.getElementById('status-message');
            
            if (usernameInput === '') {
                statusMessage.style.backgroundColor = 'red';
                statusMessage.textContent = 'Please enter a username.';
                return;
            }

            // Save to Local Storage
            localStorage.setItem('crab_username', usernameInput);
            localStorage.setItem('crab_created', new Date().toISOString());
            
            statusMessage.style.backgroundColor = 'green';
            statusMessage.textContent = `Account created successfully for "${usernameInput}"! Thanks for your soul!`;

            // Update the display immediately
            updateAccountInfo();
        }

        function deleteAccount() {
            if (confirm('Are you sure you want to log out and clear your account data? This will also remove your discount.')) {
                localStorage.removeItem('crab_username');
                localStorage.removeItem('crab_created');
                localStorage.removeItem('crab_plus_sub');
                localStorage.removeItem('crab_discount'); 
                
                const statusMessage = document.getElementById('status-message');
                statusMessage.style.backgroundColor = 'blue';
                statusMessage.textContent = 'You have been successfully logged out and data cleared.';
                
                // Refresh the view
                updateAccountInfo();
                updateSubscriptionStatus();
                updateProductPrices(); 
            }
        }

        // --- Subscription Management (Local Storage) ---
        function subscribe() {
            const statusMessage = document.getElementById('status-message');
            
            // Check if already subscribed (optional)
            if (localStorage.getItem('crab_plus_sub') === 'active') {
                statusMessage.style.backgroundColor = 'orange';
                statusMessage.textContent = 'You are already enjoying your FREE INFINITE DAY TRIAL of Crab Productions‚Ñ¢Ô∏è+!';
                return;
            }
            
            // Activate the subscription
            localStorage.setItem('crab_plus_sub', 'active');
            localStorage.setItem('crab_plus_sub_date', new Date().toISOString());

            statusMessage.style.backgroundColor = '#FF69B4'; /* Hot Pink */
            statusMessage.textContent = 'CONGRATULATIONS! You have activated your FREE INFINITE DAY TRIAL for Crab Productions‚Ñ¢Ô∏è+! Enjoy forever!';
            
            // Update the status
            updateSubscriptionStatus();
            // Show the status message for a moment
            setTimeout(() => { statusMessage.textContent = ''; statusMessage.style.backgroundColor = 'transparent'; }, 5000);
        }

        function updateSubscriptionStatus() {
            const subStatus = localStorage.getItem('crab_plus_sub');
            const subDiv = document.getElementById('subscription-status');
            
            if (subStatus === 'active') {
                subDiv.textContent = 'Crab Productions‚Ñ¢Ô∏è+ (Subscribed)';
            } else {
                subDiv.textContent = 'None';
            }
        }
    </script>
</body>
</html>
